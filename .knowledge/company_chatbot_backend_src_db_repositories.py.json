{"is_source_file": true, "format": "Python", "description": "This file contains repository functions for database interactions in a chatbot platform, including user management, message storage, and document ingestion.", "external_files": ["./models.py"], "external_methods": [], "published": ["create_user", "get_user_by_email", "add_chat_message", "list_user_messages", "ingest_documents", "list_documents"], "classes": [{"name": "UserModel", "description": "ORM model representing a user in the system."}, {"name": "ChatMessageModel", "description": "ORM model representing a chat message."}, {"name": "DocumentModel", "description": "ORM model representing a document."}], "methods": [{"name": "UserModel create_user(db: Session, email: str, password_hash: str, name: Optional[str] = None)", "description": "Creates a new user record in the database.", "scope": "", "scopeKind": ""}, {"name": "Optional[UserModel] get_user_by_email(db: Session, email: str)", "description": "Fetches a user record by email, case-insensitive.", "scope": "", "scopeKind": ""}, {"name": "ChatMessageModel add_chat_message(db: Session, user_id: str, message_text: str)", "description": "Inserts a chat message associated with a user.", "scope": "", "scopeKind": ""}, {"name": "List[ChatMessageModel] list_user_messages(db: Session, user_id: str, limit: int = 100)", "description": "Retrieves recent chat messages for a specific user.", "scope": "", "scopeKind": ""}, {"name": "int ingest_documents(db: Session, docs: List[Dict[str, Any]])", "description": "Bulk inserts documents into the database with optional metadata.", "scope": "", "scopeKind": ""}, {"name": "List[DocumentModel] list_documents(db: Session, limit: int = 100)", "description": "Lists recent documents stored in the database.", "scope": "", "scopeKind": ""}], "calls": ["db.add", "db.commit", "db.refresh", "db.execute", "select", "func.lower", "list"], "search-terms": ["repositories.py", "UserModel", "ChatMessageModel", "DocumentModel", "ingest_documents", "list_user_messages", "create_user"], "state": 2, "file_id": 16, "knowledge_revision": 64, "git_revision": "5302c16cf9e27a20a70b8255602751945f566dfd", "revision_history": [{"54": ""}, {"64": "5302c16cf9e27a20a70b8255602751945f566dfd"}], "ctags": [{"_type": "tag", "name": "add_chat_message", "path": "/home/kavia/workspace/code-generation/intelligent-chatbot-platform-2899-2908/company_chatbot_backend/src/db/repositories.py", "pattern": "/^def add_chat_message(db: Session, user_id: str, message_text: str) -> ChatMessageModel:$/", "language": "Python", "typeref": "typename:ChatMessageModel", "kind": "function", "signature": "(db: Session, user_id: str, message_text: str)"}, {"_type": "tag", "name": "create_user", "path": "/home/kavia/workspace/code-generation/intelligent-chatbot-platform-2899-2908/company_chatbot_backend/src/db/repositories.py", "pattern": "/^def create_user(db: Session, email: str, password_hash: str, name: Optional[str] = None) -> User/", "language": "Python", "typeref": "typename:UserModel", "kind": "function", "signature": "(db: Session, email: str, password_hash: str, name: Optional[str] = None)"}, {"_type": "tag", "name": "get_user_by_email", "path": "/home/kavia/workspace/code-generation/intelligent-chatbot-platform-2899-2908/company_chatbot_backend/src/db/repositories.py", "pattern": "/^def get_user_by_email(db: Session, email: str) -> Optional[UserModel]:$/", "language": "Python", "typeref": "typename:Optional[UserModel]", "kind": "function", "signature": "(db: Session, email: str)"}, {"_type": "tag", "name": "ingest_documents", "path": "/home/kavia/workspace/code-generation/intelligent-chatbot-platform-2899-2908/company_chatbot_backend/src/db/repositories.py", "pattern": "/^def ingest_documents(db: Session, docs: List[Dict[str, Any]]) -> int:$/", "language": "Python", "typeref": "typename:int", "kind": "function", "signature": "(db: Session, docs: List[Dict[str, Any]])"}, {"_type": "tag", "name": "list_documents", "path": "/home/kavia/workspace/code-generation/intelligent-chatbot-platform-2899-2908/company_chatbot_backend/src/db/repositories.py", "pattern": "/^def list_documents(db: Session, limit: int = 100) -> List[DocumentModel]:$/", "language": "Python", "typeref": "typename:List[DocumentModel]", "kind": "function", "signature": "(db: Session, limit: int = 100)"}, {"_type": "tag", "name": "list_user_messages", "path": "/home/kavia/workspace/code-generation/intelligent-chatbot-platform-2899-2908/company_chatbot_backend/src/db/repositories.py", "pattern": "/^def list_user_messages(db: Session, user_id: str, limit: int = 100) -> List[ChatMessageModel]:$/", "language": "Python", "typeref": "typename:List[ChatMessageModel]", "kind": "function", "signature": "(db: Session, user_id: str, limit: int = 100)"}], "hash": "126ac6cc16fe62a4b288f8dfca19bdba", "format-version": 4, "code-base-name": "company_chatbot_backend", "filename": "company_chatbot_backend/src/db/repositories.py"}